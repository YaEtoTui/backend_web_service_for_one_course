<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="2023-07-05-00-10" author="SazhinEA" context="campus">

        <createSequence sequenceName="hibernate_sequence" startValue="1" incrementBy="1"/>

        <createTable tableName="coordinates">

            <column name="id" type="bigint">
                <constraints primaryKey="true"/>
            </column>

            <column name="x" type="int4">
                <constraints nullable="false"/>
            </column>

            <column name="y" type="int4">
                <constraints nullable="false"/>
            </column>

            <column name="cabinet_id" type="bigint">
                <constraints foreignKeyName="coordinates_cabinet_fk"
                             referencedTableName="cabinet"
                             referencedColumnNames="id"/>
            </column>

            <column name="coordinates_parent_id" type="bigint">
                <constraints foreignKeyName="coordinates_parent_fk"
                             referencedTableName="coordinates"
                             referencedColumnNames="id"
                             nullable="true"/>
            </column>

        </createTable>

        <sql>
            insert into coordinates values(1, 1004, 2000, 2, null),
                                          (2, 1004, 1828, 2, 1),
                                          (3, 1544, 1828, 2, 2),
                                          (4, 1650, 1828, 2, 3),
                                          (5, 1650, 1398, 2, 4),
                                          (6, 1774, 1398, 2, 5),

                                          (7, 1004, 2000, 1, null),
                                          (8, 1004, 1828, 1, 7),
                                          (9, 1544, 1828, 1, 8),
                                          (10, 1650, 1828, 1, 9),
                                          (11, 1650, 1190, 1, 10),
                                          (12, 1774, 1190, 1, 11),

                                          (13, 1004, 2000, 3, null),
                                          (14, 1004, 1828, 3, 13),
                                          (15, 1544, 1828, 3, 14),
                                          (16, 1650, 1828, 3, 15),
                                          (17, 1650, 1190, 3, 16),
                                          (18, 1774, 1190, 3, 17)
        </sql>

    </changeSet>

</databaseChangeLog>